<!DOCTYPE html>
<html>
    <body>
        
        <script>
        
            "use strict";

            
            // WeakMap -> Map-like collection that allows only objects as keys and removes them together with associated value once they become inaccessible by other means
            let mark = { name: "Mark" };

            let weakMap = new WeakMap();
            
            weakMap.set(mark, "..."); 

            mark = null; // overwrite the reference -> mark is removed from memory

            // WeakMap does not support iteration and methods keys(), values(), entries(), so there’s no way to get all keys or values from it
            // methods :
            // weakMap.set(key, value)
            // weakMap.get(key)
            // weakMap.delete(key)
            // weakMap.has(key)


            // WeakSet -> analogous to Set, collection that stores only objects and removes them once they become inaccessible by other means
            // an object exists in the set while it is reachable from somewhere else
            // lke Set, it supports add, has and delete, but not size, keys() and no iterations
            let visitedSet = new WeakSet();

            let damian = { name: "Damian" };
            let hayden = { name: "Hayden" };
            let andy = { name: "Andy" };

            visitedSet.add(damian); // Damian visited us
            visitedSet.add(hayden); // Then Hayden
            visitedSet.add(damian); // Damian again

            // visitedSet has 2 users now

            // check if Damian visited ?
            alert(visitedSet.has(damian)); // true

            // check if Andy visited ?
            alert(visitedSet.has(andy)); // false

            damian = null; // visitedSet will be cleaned automatically


            // the main advantages of WeakMap and WeakSet are that they have weak reference to objects, so they can easily be removed by garbage collector
            // that comes at the cost of not having support for clear, size, keys, values…
            // being “weak”, it also serves as additional storage, but not for arbitrary data, rather for "yes/no" facts

        </script>

    </body>
</html>